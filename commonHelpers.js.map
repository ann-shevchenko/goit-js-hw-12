{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst searchImages = async (query, page) => {\n  let response = await axios.get(BASE_URL, {\n    params: {\n      key: '44022790-a27ad4929b92e52df6d2f0bb4',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: page.number,\n      per_page: page.size,\n    },\n  });\n\n  return response.data || {};\n};\n\nexport {\n  searchImages,\n};","function renderImageItem(image) {\n  return `<li>\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n      <img\n          class=\"gallery-img\"\n          src=\"${image.webformatURL}\"\n          data-source=\"${image.largeImageURL}\"\n          alt=\"${image.tags}\"></a>\n      <div class=\"information\">\n       <div>\n          <h3>Likes</h3>\n          <p>${image.likes}</p>\n       </div>\n        <div>\n            <h3>Views</h3>\n            <p>${image.views}</p>\n        </div>\n        <div>\n          <h3>Comments</h3>\n          <p>${image.comments}</p>\n        </div>\n        <div>\n          <h3>Downloads</h3>\n          <p>${image.downloads}</p>\n        </div>\n      </div>\n    </li>`;\n}\n\nfunction renderImageList(images) {\n  if (images && images.length) {\n    return images.map(renderImageItem).join('');\n  }\n  return '';\n}\n\nexport {\n  renderImageList,\n};","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImages } from './js/pixabay-api';\nimport { renderImageList } from './js/render-functions';\n\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n  caption: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction showToast(message, color) {\n  iziToast.show({\n    message,\n    image: '../img/bi_x-octagon.svg',\n    messageColor: '#FFF',\n    position: 'topRight',\n    backgroundColor: color,\n    maxWidth: '472px',\n    imageWidth: 24,\n  });\n}\n\nfunction showErrorToast(message) {\n  showToast(message, '#EF4040');\n}\n\nfunction showInfoToast(message) {\n  showToast(message, '#323C7F');\n}\n\nconst form = document.querySelector('.form');\nconst loadMore = document.querySelector('.btn-lmore');\nconst imageList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\n\nfunction scrollImages(rows) {\n  let imgHeight = imageList.querySelector('li').getBoundingClientRect().height;\n  window.scrollBy({\n    top: imgHeight * rows,\n    behavior: 'smooth',\n  });\n}\n\nfunction updateImageList(hits, append) {\n  const markup = renderImageList(hits);\n  if (append) {\n    const tmp = document.createElement('template');\n    tmp.innerHTML = markup\n    imageList.appendChild(tmp.content);\n  } else {\n    imageList.innerHTML = markup;\n  }\n  lightbox.refresh();\n}\n\nfunction toggle(element, visible) {\n  if (visible) {\n    element.classList.remove('hidden');\n  } else {\n    element.classList.add('hidden');\n  }\n}\n\nconst search = {\n  query: '',\n  page: {\n    number: 0,\n    size: 15,\n    last: false,\n  },\n  totalItems: 0,\n\n  nextPage() {\n    this.page.number++;\n    return this.page;\n  },\n\n  hasNextPage() {\n    const loadedItems = this.page.number * this.page.size;\n    return this.totalItems && loadedItems < this.totalItems;\n  },\n\n  reset(query, pageSize = 15) {\n    this.query = query.trim();\n    this.totalItems = 0;\n    this.page = {\n      number: 0,\n      size: pageSize,\n      last: false,\n    };\n  },\n};\n\nasync function loadImages(callback) {\n  toggle(loader, true);\n  toggle(loadMore, false);\n  try {\n    const data = await searchImages(search.query, search.nextPage());\n    callback(data);\n  } catch (e) {\n    console.error(e);\n    showErrorToast(\"Sorry, something went wrong. Try one more time.\");\n  } finally {\n    toggle(loader, false);\n    toggle(loadMore, search.hasNextPage());\n\n    if (search.totalItems) {\n      if (!search.hasNextPage()) {\n        showInfoToast(\"We're sorry, but you've reached the end of search results.\");\n      }\n    } else {\n      showErrorToast(\"Sorry, there are no images matching your search query. Please try again!\");\n    }\n  }\n}\n\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  search.reset(event.target.elements.query.value);\n  if (!search.query.length) {\n    showErrorToast(\"Please input non-blank query.\");\n    return;\n  }\n\n  updateImageList([], false);\n\n  await loadImages(data => {\n    updateImageList(data.hits || [], false);\n    search.totalItems = data.totalHits || 0;\n  });\n});\n\nloadMore.addEventListener('click', async event => {\n  event.preventDefault();\n\n  await loadImages(data => {\n    updateImageList(data.hits || [], true);\n    scrollImages(2);\n  });\n});\n\n\n"],"names":["BASE_URL","searchImages","query","page","axios","renderImageItem","image","renderImageList","images","lightbox","SimpleLightbox","showToast","message","color","iziToast","showErrorToast","showInfoToast","form","loadMore","imageList","loader","scrollImages","rows","imgHeight","updateImageList","hits","append","markup","tmp","toggle","element","visible","search","loadedItems","pageSize","loadImages","callback","data","e","event"],"mappings":"owBAEA,MAAMA,EAAW,2BAEXC,EAAe,MAAOC,EAAOC,KAClB,MAAMC,EAAM,IAAIJ,EAAU,CACvC,OAAQ,CACN,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EAAK,OACX,SAAUA,EAAK,IAChB,CACL,CAAG,GAEe,MAAQ,GCjB1B,SAASE,EAAgBC,EAAO,CAC9B,MAAO;AAAA,sCAC6BA,EAAM,aAAa;AAAA;AAAA;AAAA,iBAGxCA,EAAM,YAAY;AAAA,yBACVA,EAAM,aAAa;AAAA,iBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,eAIZA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAITA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,eAIbA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,eAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,UAI9B,CAEA,SAASC,EAAgBC,EAAQ,CAC/B,OAAIA,GAAUA,EAAO,OACZA,EAAO,IAAIH,CAAe,EAAE,KAAK,EAAE,EAErC,EACT,CC3BA,MAAMI,EAAW,IAAIC,EAAe,kBAAmB,CACrD,QAAS,GACT,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASC,EAAUC,EAASC,EAAO,CACjCC,EAAS,KAAK,CACZ,QAAAF,EACA,MAAO,0BACP,aAAc,OACd,SAAU,WACV,gBAAiBC,EACjB,SAAU,QACV,WAAY,EAChB,CAAG,CACH,CAEA,SAASE,EAAeH,EAAS,CAC/BD,EAAUC,EAAS,SAAS,CAC9B,CAEA,SAASI,EAAcJ,EAAS,CAC9BD,EAAUC,EAAS,SAAS,CAC9B,CAEA,MAAMK,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAY,SAAS,cAAc,eAAe,EAClDC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAASC,EAAaC,EAAM,CAC1B,IAAIC,EAAYJ,EAAU,cAAc,IAAI,EAAE,sBAAuB,EAAC,OACtE,OAAO,SAAS,CACd,IAAKI,EAAYD,EACjB,SAAU,QACd,CAAG,CACH,CAEA,SAASE,EAAgBC,EAAMC,EAAQ,CACrC,MAAMC,EAASpB,EAAgBkB,CAAI,EACnC,GAAIC,EAAQ,CACV,MAAME,EAAM,SAAS,cAAc,UAAU,EAC7CA,EAAI,UAAYD,EAChBR,EAAU,YAAYS,EAAI,OAAO,CACrC,MACIT,EAAU,UAAYQ,EAExBlB,EAAS,QAAO,CAClB,CAEA,SAASoB,EAAOC,EAASC,EAAS,CAC5BA,EACFD,EAAQ,UAAU,OAAO,QAAQ,EAEjCA,EAAQ,UAAU,IAAI,QAAQ,CAElC,CAEA,MAAME,EAAS,CACb,MAAO,GACP,KAAM,CACJ,OAAQ,EACR,KAAM,GACN,KAAM,EACP,EACD,WAAY,EAEZ,UAAW,CACT,YAAK,KAAK,SACH,KAAK,IACb,EAED,aAAc,CACZ,MAAMC,EAAc,KAAK,KAAK,OAAS,KAAK,KAAK,KACjD,OAAO,KAAK,YAAcA,EAAc,KAAK,UAC9C,EAED,MAAM/B,EAAOgC,EAAW,GAAI,CAC1B,KAAK,MAAQhC,EAAM,OACnB,KAAK,WAAa,EAClB,KAAK,KAAO,CACV,OAAQ,EACR,KAAMgC,EACN,KAAM,EACZ,CACG,CACH,EAEA,eAAeC,EAAWC,EAAU,CAClCP,EAAOT,EAAQ,EAAI,EACnBS,EAAOX,EAAU,EAAK,EACtB,GAAI,CACF,MAAMmB,EAAO,MAAMpC,EAAa+B,EAAO,MAAOA,EAAO,SAAQ,CAAE,EAC/DI,EAASC,CAAI,CACd,OAAQC,EAAG,CACV,QAAQ,MAAMA,CAAC,EACfvB,EAAe,iDAAiD,CACpE,QAAY,CACRc,EAAOT,EAAQ,EAAK,EACpBS,EAAOX,EAAUc,EAAO,YAAa,CAAA,EAEjCA,EAAO,WACJA,EAAO,eACVhB,EAAc,4DAA4D,EAG5ED,EAAe,0EAA0E,CAE5F,CACH,CAGAE,EAAK,iBAAiB,SAAU,MAAMsB,GAAS,CAI7C,GAHAA,EAAM,eAAc,EAEpBP,EAAO,MAAMO,EAAM,OAAO,SAAS,MAAM,KAAK,EAC1C,CAACP,EAAO,MAAM,OAAQ,CACxBjB,EAAe,+BAA+B,EAC9C,MACD,CAEDS,EAAgB,CAAA,EAAI,EAAK,EAEzB,MAAMW,EAAWE,GAAQ,CACvBb,EAAgBa,EAAK,MAAQ,CAAE,EAAE,EAAK,EACtCL,EAAO,WAAaK,EAAK,WAAa,CAC1C,CAAG,CACH,CAAC,EAEDnB,EAAS,iBAAiB,QAAS,MAAMqB,GAAS,CAChDA,EAAM,eAAc,EAEpB,MAAMJ,EAAWE,GAAQ,CACvBb,EAAgBa,EAAK,MAAQ,CAAE,EAAE,EAAI,EACrChB,EAAa,CAAC,CAClB,CAAG,CACH,CAAC"}